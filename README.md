# ğŸ  Há»‡ thá»‘ng NhÃ  ThÃ´ng Minh Äiá»u khiá»ƒn MÃ¡y BÆ¡m NÆ°á»›c vÃ  Thiáº¿t bá»‹ Báº¿p

---

## ğŸ‰ Giá»›i thiá»‡u

Dá»± Ã¡n nÃ y Ä‘Æ°á»£c thá»±c hiá»‡n trong mÃ´n **Láº­p trÃ¬nh NhÃºng** táº¡i Há»c viá»‡n CÃ´ng nghá»‡ BÆ°u chÃ­nh Viá»…n thÃ´ng - CÆ¡ sá»Ÿ TP.HCM.

Há»‡ thá»‘ng nhÃ  thÃ´ng minh Ä‘iá»u khiá»ƒn **mÃ¡y bÆ¡m nÆ°á»›c**, **Ä‘Ã¨n báº¿p** vÃ  **quáº¡t thÃ´ng giÃ³**, tÃ­ch há»£p cáº£m biáº¿n vÃ  giao diá»‡n ngÆ°á»i dÃ¹ng thÃ¢n thiá»‡n, mang láº¡i sá»± tiá»‡n nghi vÃ  hiá»‡u quáº£ cho khÃ´ng gian báº¿p hiá»‡n Ä‘áº¡i.

Há»‡ thá»‘ng sá»­ dá»¥ng **vi Ä‘iá»u khiá»ƒn NUCLEO-STM32F429ZI**, cÃ¡c loáº¡i cáº£m biáº¿n (siÃªu Ã¢m, chuyá»ƒn Ä‘á»™ng, Ã¡nh sÃ¡ng), **LCD**, bÃ n phÃ­m vÃ  Ä‘Æ°á»£c láº­p trÃ¬nh nhÃºng Ä‘á»ƒ Ä‘áº£m báº£o hoáº¡t Ä‘á»™ng thÃ´ng minh vÃ  á»•n Ä‘á»‹nh.

### ThÃ´ng tin dá»± Ã¡n:

- **Sinh viÃªn:** Tráº§n Minh ThÆ°Æ¡ng  
- **MÃ£ sá»‘ sinh viÃªn:** N21DCVT101  
- **Lá»›p:** D21CQVTHI01-N  
- **Giáº£ng viÃªn:** ThS. Pháº¡m Quá»‘c Há»£p  
- **NgÃ y:** 10/05/2025

---

## ğŸ¯ Má»¥c tiÃªu Dá»± Ã¡n

- **Tá»± Ä‘á»™ng hÃ³a ğŸ¤–:** GiÃ¡m sÃ¡t vÃ  Ä‘iá»u khiá»ƒn thiáº¿t bá»‹ (mÃ¡y bÆ¡m, Ä‘Ã¨n, quáº¡t) dá»±a trÃªn cáº£m biáº¿n vÃ  lá»‹ch thá»i gian.  
- **Linh hoáº¡t ğŸ”„:** Há»— trá»£ cháº¿ Ä‘á»™ thá»§ cÃ´ng vÃ  tá»± Ä‘á»™ng, cÃ¹ng vá»›i cÃ i Ä‘áº·t lá»‹ch báº­t/táº¯t.  
- **Tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng ğŸ–¥ï¸:** Giao diá»‡n LCD 20x4 trá»±c quan, nháº­p liá»‡u báº±ng bÃ n phÃ­m 4x4, cÃ³ báº£o máº­t máº­t kháº©u.  
- **Hiá»‡u quáº£ âš¡:** Váº­n hÃ nh á»•n Ä‘á»‹nh, tiáº¿t kiá»‡m nÄƒng lÆ°á»£ng.

---

## ğŸ“‹ TÃ­nh nÄƒng ChÃ­nh

### ğŸ”§ Cháº¿ Ä‘á»™ Thá»§ cÃ´ng ğŸ–ï¸

- Báº­t/táº¯t Ä‘Ã¨n, quáº¡t, mÃ¡y bÆ¡m qua nÃºt nháº¥n hoáº·c bÃ n phÃ­m (A/B/C).

### ğŸ¤– Cháº¿ Ä‘á»™ Tá»± Ä‘á»™ng

- MÃ¡y bÆ¡m hoáº¡t Ä‘á»™ng khi má»±c nÆ°á»›c tháº¥p (HC-SR04) vÃ  dá»«ng khi Ä‘áº§y.  
- ÄÃ¨n báº¿p báº­t khi cÃ³ chuyá»ƒn Ä‘á»™ng (PIR AM312) **vÃ ** Ã¡nh sÃ¡ng yáº¿u (LDR NVZ1).  
- Quáº¡t **luÃ´n báº­t** trong cháº¿ Ä‘á»™ tá»± Ä‘á»™ng.

### â° CÃ i Ä‘áº·t Thá»i gian

- Äáº·t lá»‹ch báº­t/táº¯t cho thiáº¿t bá»‹ (phÃ­m 1/2/3) vÃ  Ä‘áº·t giá» há»‡ thá»‘ng (phÃ­m 4).

### ğŸ”’ Báº£o máº­t

- **1111:** Thá»§ cÃ´ng  
- **2222:** Tá»± Ä‘á»™ng  
- **3333:** CÃ i Ä‘áº·t thá»i gian  
- **8888:** Má»Ÿ khÃ³a  
- **9999:** KhÃ³a há»‡ thá»‘ng

### ğŸ–¥ï¸ Giao diá»‡n

- LCD 20x4 hiá»ƒn thá»‹ menu, tráº¡ng thÃ¡i thiáº¿t bá»‹, vÃ  cáº£nh bÃ¡o lá»—i.

### ğŸš¨ Pháº£n há»“i

- LED (xanh/Ä‘á») vÃ  cÃ²i Ä‘á»ƒ cáº£nh bÃ¡o hoáº·c pháº£n há»“i tráº¡ng thÃ¡i.

---

## ğŸ› ï¸ ThÃ nh pháº§n Pháº§n cá»©ng

| Linh kiá»‡n            | MÃ´ táº£ |
|----------------------|-------|
| **NUCLEO-STM32F429ZI** | Vi Ä‘iá»u khiá»ƒn ARM Cortex-M4, 180 MHz, 2 MB Flash, 256 KB SRAM |
| **HC-SR04**          | Cáº£m biáº¿n siÃªu Ã¢m Ä‘o má»±c nÆ°á»›c (2â€“450 cm, Ä‘á»™ chÃ­nh xÃ¡c 3 mm) |
| **PIR AM312**        | Cáº£m biáº¿n phÃ¡t hiá»‡n chuyá»ƒn Ä‘á»™ng (3â€“5 m) |
| **LDR NVZ1**         | Cáº£m biáº¿n Ã¡nh sÃ¡ng Ä‘o cÆ°á»ng Ä‘á»™ sÃ¡ng |
| **BÃ n phÃ­m 4x4**     | 16 phÃ­m ma tráº­n (0â€“9, Aâ€“D, *, #) |
| **LCD 20x4**         | Hiá»ƒn thá»‹ tráº¡ng thÃ¡i (giao tiáº¿p 4-bit hoáº·c I2C) |
| **Relay 5V**         | Äiá»u khiá»ƒn thiáº¿t bá»‹ Ä‘iá»‡n (220V/10A) |
| **LED & CÃ²i**        | Hiá»ƒn thá»‹ tráº¡ng thÃ¡i, cáº£nh bÃ¡o lá»—i |

### ğŸ“¸ HÃ¬nh áº£nh Linh kiá»‡n

> (ChÃ¨n hÃ¬nh áº£nh thá»±c táº¿ vÃ o thÆ° má»¥c `media/` vÃ  thÃªm liÃªn káº¿t táº¡i Ä‘Ã¢y náº¿u cÃ³.)

---

## ğŸ”Œ Káº¿t ná»‘i ChÃ¢n

- **HC-SR04:** TRIG (PA6), ECHO (PA7)  
- **PIR AM312:** OUT (PA3)  
- **LDR NVZ1:** DO (PG9)  
- **BÃ n phÃ­m 4x4:**  
  - HÃ ng: PB3, PB5, PC7, PA15  
  - Cá»™t: PB12, PB13, PB15, PC6  
- **NÃºt nháº¥n:** PE9, PE11, PF14, PE13, PF15  
- **Relay:** PF2 (mÃ¡y bÆ¡m), PE6 (quáº¡t)  
- **LED:** PG14, PB6, PB2, PD15, PF12  
- **CÃ²i:** PE10  
- **LCD:** GPIO hoáº·c I2C qua PCF8574 (SDA/SCL)

---

## ğŸ“Š Kiáº¿n trÃºc Há»‡ thá»‘ng

Vi Ä‘iá»u khiá»ƒn **STM32F429ZI** lÃ  trung tÃ¢m Ä‘iá»u khiá»ƒn:

### Giao thá»©c Truyá»n thÃ´ng:

- **GPIO ğŸ“¡:** Äiá»u khiá»ƒn cáº£m biáº¿n, relay, LED, nÃºt nháº¥n  
- **Keypad âŒ¨ï¸:** QuÃ©t bÃ n phÃ­m 4x4  
- **HC-SR04 â±ï¸:** Äo khoáº£ng cÃ¡ch báº±ng TRIG/ECHO  
- **LCD ğŸ–¥ï¸:** Giao tiáº¿p song song hoáº·c I2C  
- **Ngáº¯t âš¡:** Pháº£n há»“i sá»± kiá»‡n nhanh tá»« cáº£m biáº¿n/nÃºt nháº¥n

---

## ğŸ’» Chi tiáº¿t Pháº§n má»m

### MÃ´i trÆ°á»ng PhÃ¡t triá»ƒn

- **IDE:** Visual Studio Code + PlatformIO  
- **Framework:** Arduino cho STM32  
- **NgÃ´n ngá»¯:** C/C++  
- **ThÆ° viá»‡n:**  
  - `LiquidCrystal_I2C`  
  - `STM32 MUCLEO-F429ZI`

### Kiáº¿n trÃºc Pháº§n má»m

- **FSM ğŸ§ :** Quáº£n lÃ½ cÃ¡c cháº¿ Ä‘á»™ (Thá»§ cÃ´ng, Tá»± Ä‘á»™ng, CÃ i Ä‘áº·t thá»i gian)  
- **Interrupt-Driven âš¡:** Xá»­ lÃ½ ngáº¯t tá»« nÃºt vÃ  cáº£m biáº¿n  
- **Module hÃ³a ğŸ§©:** TÃ¡ch cÃ¡c chá»©c nÄƒng thÃ nh module  
- **Soft-RTC â²ï¸:** Sá»­ dá»¥ng `millis()` vÃ  `micros()`  
- **Debounce ğŸ”§:** Chá»‘ng nhiá»…u nÃºt nháº¥n vÃ  bÃ n phÃ­m

---

## ğŸ“ Cáº¥u trÃºc ThÆ° má»¥c

```plaintext
â”œâ”€â”€ include/
â”‚   â”œâ”€â”€ actuators.h
â”‚   â”œâ”€â”€ buttons.h
â”‚   â”œâ”€â”€ display.h
â”‚   â”œâ”€â”€ keypad.h
â”‚   â”œâ”€â”€ modes.h
â”‚   â”œâ”€â”€ security.h
â”‚   â”œâ”€â”€ sensors.h
â”‚   â”œâ”€â”€ time_management.h
â”‚   â”œâ”€â”€ utils.h
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.cpp
â”‚   â”œâ”€â”€ actuators.cpp
â”‚   â”œâ”€â”€ buttons.cpp
â”‚   â”œâ”€â”€ display.cpp
â”‚   â”œâ”€â”€ keypad.cpp
â”‚   â”œâ”€â”€ modes.cpp
â”‚   â”œâ”€â”€ security.cpp
â”‚   â”œâ”€â”€ sensors.cpp
â”‚   â”œâ”€â”€ time_management.cpp
â”‚   â”œâ”€â”€ utils.cpp
â”œâ”€â”€ platformio.ini
â”œâ”€â”€ README.md
â”œâ”€â”€ media/
â”‚   â”œâ”€â”€ image23.png
â”‚   â”œâ”€â”€ image24.png

```

# ğŸš€ HÆ°á»›ng dáº«n CÃ i Ä‘áº·t vÃ  Sá»­ dá»¥ng

## âš™ï¸ YÃªu cáº§u pháº§n má»m

- Visual Studio Code  
- PlatformIO IDE (cÃ i trá»±c tiáº¿p trÃªn VSCode)  
- Driver STLink (cho board STM32 Nucleo)  
- Python 3 (Ä‘Æ°á»£c PlatformIO sá»­ dá»¥ng ná»™i bá»™)

---

## ğŸ“¦ CÃ i Ä‘áº·t mÃ´i trÆ°á»ng

### 1. CÃ i Ä‘áº·t Visual Studio Code  
Táº£i vÃ  cÃ i Ä‘áº·t tá»«: https://code.visualstudio.com/

### 2. CÃ i Ä‘áº·t PlatformIO Extension  
Má»Ÿ VSCode â†’ Má»Ÿ má»¥c **Extensions** (Ctrl+Shift+X)  
TÃ¬m **"PlatformIO IDE"** â†’ Nháº¥n **Install**

### 3. Clone dá»± Ã¡n vá» mÃ¡y

```bash
git clone https://github.com/tennguoidung/ten-repo.git
cd ten-repo
```
### 4. Má»Ÿ thÆ° má»¥c báº±ng VSCode

VÃ o File â†’ Open Folder... vÃ  chá»n thÆ° má»¥c dá»± Ã¡n vá»«a clone.

ğŸ”§ Cáº¥u hÃ¬nh PlatformIO
File platformio.ini Ä‘Ã£ Ä‘Æ°á»£c cáº¥u hÃ¬nh sáºµn:

- [env:nucleo_f429zi]

- platform = ststm32

- board = nucleo_f429zi

- framework = arduino

- upload_protocol = stlink

- monitor_speed = 115200

âš ï¸ Náº¿u báº¡n sá»­ dá»¥ng bo máº¡ch khÃ¡c, hÃ£y chá»‰nh láº¡i board = cho phÃ¹ há»£p vá»›i pháº§n cá»©ng cá»§a báº¡n.

ğŸš€ BiÃªn dá»‹ch vÃ  Upload

- Nháº¥n PlatformIO: Build (âœ”ï¸) Ä‘á»ƒ biÃªn dá»‹ch mÃ£ nguá»“n.

- Nháº¥n PlatformIO: Upload (â¡ï¸) Ä‘á»ƒ náº¡p chÆ°Æ¡ng trÃ¬nh vÃ o board.

- Äáº£m báº£o board Ä‘Ã£ Ä‘Æ°á»£c káº¿t ná»‘i vá»›i mÃ¡y tÃ­nh qua cÃ¡p USB.

ğŸ–¥ï¸ Theo dÃµi Serial Monitor

Nháº¥n PlatformIO: Monitor (ğŸ”) Ä‘á»ƒ xem log hoáº·c pháº£n há»“i tá»« vi Ä‘iá»u khiá»ƒn.

## ğŸ”‘ Máº­t kháº©u sá»­ dá»¥ng

| Máº­t kháº©u | Chá»©c nÄƒng                        |
|----------|----------------------------------|
| 1111     | KÃ­ch hoáº¡t cháº¿ Ä‘á»™ **Thá»§ cÃ´ng**   |
| 2222     | KÃ­ch hoáº¡t cháº¿ Ä‘á»™ **Tá»± Ä‘á»™ng**    |
| 3333     | **CÃ i Ä‘áº·t Thá»i gian & Lá»‹ch**    |
| 8888     | **Má»Ÿ khÃ³a há»‡ thá»‘ng**            |
| 9999     | **KhÃ³a há»‡ thá»‘ng táº¡m thá»i**      |


ğŸ‘‰ Nháº­p máº­t kháº©u báº±ng bÃ n phÃ­m 4x4 vÃ  nháº¥n # Ä‘á»ƒ xÃ¡c nháº­n.

ğŸ“‹ Ghi chÃº sá»­ dá»¥ng

- MÃ n hÃ¬nh LCD 20x4 hiá»ƒn thá»‹ menu, thÃ´ng bÃ¡o vÃ  lá»—i há»‡ thá»‘ng.

- Há»‡ thá»‘ng cÃ³ thá»ƒ sá»­ dá»¥ng nÃºt nháº¥n Ä‘á»ƒ Ä‘iá»u khiá»ƒn nhanh cÃ¡c thiáº¿t bá»‹.

- CÃ²i cáº£nh bÃ¡o sáº½ phÃ¡t tiáº¿ng náº¿u cÃ³ lá»—i hoáº·c nháº­p sai máº­t kháº©u.

ğŸ§ª Kiá»ƒm tra vÃ  Thá»­ nghiá»‡m

- Äáº·t tay trÆ°á»›c cáº£m biáº¿n PIR â†’ Ä‘Ã¨n sáº½ báº­t náº¿u Ã¡nh sÃ¡ng yáº¿u.

- Äá»• nÆ°á»›c vÃ o bá»ƒ thá»­ HC-SR04 â†’ mÃ¡y bÆ¡m sáº½ báº­t/táº¯t tÆ°Æ¡ng á»©ng.

- Nháº¥n cÃ¡c nÃºt hoáº·c nháº­p lá»‡nh Ä‘á»ƒ kiá»ƒm tra cÃ¡c chá»©c nÄƒng nhÆ° thá»i gian, relay.

---

## ğŸ’¡ Náº¿u báº¡n thÃ­ch dá»± Ã¡n nÃ y, hÃ£y â­ï¸ trÃªn GitHub nhÃ©! 

## ğŸ“© LiÃªn há»‡:  
[tranminhthuong08082003@gmail.com](mailto:tranminhthuong08082003@gmail.com)

---

## ğŸ“Œ TÃ¡c giáº£:  
ğŸš€ **Tran Minh Thuong** ğŸš€


